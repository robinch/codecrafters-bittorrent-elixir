defmodule Bittorrent.Tracker.ResponseTest do
  use ExUnit.Case

  alias Bittorrent.Tracker.Response

  test "from_bencode" do
    bencode_response =
      <<100, 56, 58, 99, 111, 109, 112, 108, 101, 116, 101, 105, 49, 49, 101, 49, 48, 58, 105,
        110, 99, 111, 109, 112, 108, 101, 116, 101, 105, 49, 101, 56, 58, 105, 110, 116, 101, 114,
        118, 97, 108, 105, 49, 56, 48, 48, 101, 49, 50, 58, 109, 105, 110, 32, 105, 110, 116, 101,
        114, 118, 97, 108, 105, 49, 56, 48, 48, 101, 53, 58, 112, 101, 101, 114, 115, 55, 50, 58,
        106, 72, 196, 0, 162, 13, 188, 119, 61, 177, 26, 225, 2, 7, 245, 20, 200, 213, 71, 224, 0,
        29, 200, 214, 37, 48, 74, 20, 174, 153, 82, 149, 227, 229, 26, 234, 72, 175, 28, 2, 230,
        86, 45, 67, 229, 74, 234, 103, 195, 90, 215, 221, 178, 114, 66, 55, 206, 70, 234, 96, 69,
        53, 20, 159, 234, 96, 216, 195, 129, 27, 234, 96, 101>>

    assert %Bittorrent.Tracker.Response{
             interval: 1800,
             peers: [
               {"106.72.196.0", "41485"},
               {"188.119.61.177", "6881"},
               {"2.7.245.20", "51413"},
               {"71.224.0.29", "51414"},
               {"37.48.74.20", "44697"},
               {"82.149.227.229", "6890"},
               {"72.175.28.2", "58966"},
               {"45.67.229.74", "60007"},
               {"195.90.215.221", "45682"},
               {"66.55.206.70", "60000"},
               {"69.53.20.159", "60000"},
               {"216.195.129.27", "60000"}
             ]
           } ==
             Response.from_bencode(bencode_response)
  end
end
